#### C#中的类和结构

结构声明需要使用关键字 struct

```c#
namespace Tian {
  public struct Text {}
  public class Text1{}
}
```

在C#中类和结构是同一级别的，结构是声明在命名空间里的，而没有在类中，结构和类有许多地方有相似的地方，都可以写入方法和属性，声明字段和类的基本操作相同，

但是也有不同的地方

- 在结构中不能给字段赋初始值，但是类可以
- 结构不允许显示声明不带参数的构造函数
- 如果有构造函数则必须为所有字段赋初始值
- 结构不能声明空的构造函数
- 结构体里面的构造函数不允许通过属性来赋初始值，属性不一定的是相应字
- 结构是值类型，存储在栈上
- 结构不能定义自动属性，原因是自动属性会在编译时自动生成一个字段，但是这个字段，结构要求必须在构造函数中赋初始值

### 通过上面的描述类和结构都可以完成一些相同的工作，那什么时候用类或者结构呢？

- 结构是存储在栈上的，栈的特定是存储速度快，但是容量小，因此当存储一些轻量级数据的时候使用
- 类是引用类型，存储在堆上，速度相对较慢，但是仍然是我们的首选



在C# 中某个类型（类，结构或者记录）的定义的作用类似于蓝图，指定该类型可以进行那些操作，从本质上说，对象是按照此蓝图分配和配置的内存块，



### 封装

封装有时候称为面向对象编程的第一支柱或原则，类和结构可以指定自己的每个成员对外部代码的可访问性，可以隐藏不得在类或程序集外部使用的方法和变量，以限制编码错误以及恶意攻击发生的可能性，

### 成员

类型的成员包括，方法，字段，常量，属性和事件，C#没有全局变量或方法，这一点与其他语言不同，即使是编程的入口点（main 方法）也必须在类或结构中声明（使用顶级语句时，隐式声明）

- 字段
- 常量
- 属性
- 方法
- 构造函数
- 事件
- 终结器
- 索引器
- 运算符重载
- 嵌套类型

### 可访问性

一些方法和属性可供所在类或结构外部的代码（称为客户端代码）调用或访问，另一些方法和属性只能在类或结构本身中使用，请务必限制代码的可访问性，仅供允许的客户端代码进行访问，需要使用以下访问修饰符指定类型及其成员对客户端代码的可访问性

- public
- protected
- internal
- Protected internal
- Private
- private protected

可访问性默认为 Private

### 继承

类（而非结构）支持集成的概念，派生自另一个类（称为基类）的类自动包含基类的所有公共，受保护的内部成员（其构造函数和终结器除外）

可以将其声明为 abstract , 即一个或多个方法没有实现代码，尽管抽象类无法实例化，但可以作为提供缺少实现代码的其他类的基类，类还可以声明为sealed ，以阻止其他类继承

### 界面

类和结构和记录可以实现多个接口，从接口实现意味着类型和接口实现中定义的所有方法

### 泛型类型

类，结构和记录可以使用一个或多个类型参数来进行定义，客户端代码在创建类型实例的时候提供类型，例如[System.Collections.Generic](https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic) 命名空间中的 [List](https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.list-1) 类就是用一个类型参数定义的。 客户端代码创建 `List<string>` 或 `List<int>` 的实例来指定列表将包含的类型。 有关详细信息，请参阅[泛型](https://docs.microsoft.com/zh-cn/dotnet/csharp/fundamentals/types/generics)。

### 静态类型

类（非结构和记录）可以声明为 static 静态类只能包含静态成员，不能使用 new 关键字来进行实例化，在程序加载时，类的一个副本会加载到内存中，而其成员则可通过类型进行访问，类，结构和记录都可以包含静态成员，

### 嵌套类型

类，结构和记录可以嵌套在其他类，结构和记录中

### 分部类型

可以在一个代码文件中定义类，结构或方法的一部分，并在其他代码文件中定义另一部分，

### 对象初始值设定

可以通过将值分配给属性来实例化和初始化类后结构对象以及对象集合

### 匿名类型

在不方便或不需要创建命名类的情况下，可以使用匿名类型，匿名类型由其命名数据成员定义

### 扩展方法

可以通过创建单独的类型类扩展类，而无需创建派生类，该类型包含可以调用的方法，就像他们属于原始类型一样

### 记录

C# 9 中引入了 record 类型，可创建此引用类型而不创建类或者结构，记录是带有内置行为的类，用于将数据封装在不可变类型中，c#10 又引入了 record struct 值类型，  记录（`record class` 或 `record struct`）提供以下功能：

- 用于创建具有不可变属性的引用类型的简明语法
- 值相等性，两个记录类型的变量在它们的类型和两个记录中每个字段的值都相同时，它们是相等的，类使用引用相等性，即：如果类类型的两个变量引用同一个对象，则这两个变量是相等的
- 非破坏性变化的简明语法。 使用 `with` 表达式，可以创建作为现有实例副本的新记录实例，但更改了指定的属性值。
- 显示的内置格式设置。 `ToString` 方法输出记录类型名称以及公共属性的名称和值。
- 支持记录类中的继承层次结构。 记录类支持继承。 记录结构不支持继承。